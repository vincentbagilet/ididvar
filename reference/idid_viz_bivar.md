# Visualization of the relationship between x and y, after partialling out

Makes a bivariate graph to visualize the data and relationship between
the outcome and the variable of interest, after having partialLed out
controls.

## Usage

``` r
idid_viz_bivar(reg, var_interest, partial_iv = TRUE, ...)
```

## Arguments

- reg:

  A regression object.

- var_interest:

  A string. The name of the main variable of interest.

- partial_iv:

  A boolean. If TRUE, partials out the part of the endogenous variables
  that are not explained by the instruments. If the regression is not an
  IV (or not generated by `AER::ivreg` or
  [`fixest::feols`](https://lrberge.github.io/fixest/reference/feols.html)
  with an instrumented part), the value of `partial_iv` has no impact on
  the outcome of the function.

- ...:

  Additional elements to pass to the regression function when
  partialling out controls.

## Value

A ggplot2 scatter plot and regression line of the relationship between
the outcome and the variable of interest, after partialling out
controls.

## Examples

``` r
reg_few_ctrl <- ggplot2::txhousing |>
  lm(formula = log(sales) ~ median)

idid_viz_bivar(reg_few_ctrl, "median")
#> Warning: Removed 617 rows containing non-finite outside the scale range
#> (`stat_smooth()`).
#> Warning: Removed 617 rows containing missing values or values outside the scale range
#> (`geom_point()`).


reg_more_ctrl <- ggplot2::txhousing |>
  lm(formula = log(sales) ~ median + listings + city + as.factor(date))

idid_viz_bivar(reg_more_ctrl, "median")
#> Warning: Removed 1434 rows containing non-finite outside the scale range
#> (`stat_smooth()`).
#> Warning: Removed 1434 rows containing missing values or values outside the scale range
#> (`geom_point()`).
```
