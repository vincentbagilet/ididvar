[{"path":"https://vincentbagilet.github.io/ididvar/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 Vincent Bagilet Permission hereby granted, free charge, person obtaining copy software associated documentation files (â€œSoftwareâ€), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED â€œâ€, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/background.html","id":"intuition","dir":"Articles","previous_headings":"","what":"Intuition","title":"Background on the weights","text":"weights represent much observation contributes identification. correspond leverage observation bivariate regression independent variable treatment main variable interest, partialling controls.equivalentâ€“normalization oneâ€“multiple regression weights defined Aronow Samii (2016) previously discussed Angrist Pischke (2009). Observations main variable interest well explained controls contribute little identification; controls fixed effects absorb variation. range existing tools statistics literature, leverage Cookâ€™s distance, already measure influence individual observations regression parameters. measures, however, assess influence parameter vector directly suited applied economics interest typically confined single parameter: coefficient treatment variable. get suited measure, present procedure consists first applying Frisch-Waugh-Lovell theorem computing leverage regression residualized outcome residualized treatment. residuals obtained regressions full set controls, including fixed effects identification-related controls control functions. produces observation-specific weights describing extent observation contributes estimation treatment effect. weight observation âˆˆ{1,...,N}\\\\{1, ..., N\\} : wi=(xiâˆ’ð”¼[xi|Ci])2âˆ‘jwjw_i = \\dfrac{\\left( x_i - \\mathbb{E}[x_i | C_i] \\right)^2 }{\\sum_j w_j} xx variable interest CC vector controls fixed effects. weights therefore normalized squared residuals regression xx full set controls. package, computed using estimation procedure one used main regression, just replacing outcome variable dependent variable interest. following example illustrates idid_partial_out function works example model describing relationship median price number housing sales Texas:","code":"library(ididvar) library(ggplot2) library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union library(fixest)  reg_ex_fixest <- ggplot2::txhousing |>   mutate(l_sales = log(sales)) |>    fixest::feols(fml = l_sales ~ median + listings | year + city, vcov = \"twoway\") #> NOTE: 1,434 observations removed because of NA values (LHS: 568, RHS: 1,434).  idid_partial_out(reg_ex_fixest, \"median\") |>    head() #> NOTE: 1,434 observations removed because of NA values (LHS: 616, RHS: 1,424). #> [1]  4357.90243 -8317.76671 -8897.22065  1603.32003   308.18621   -99.38339  txhousing |>    feols(fml = median ~ listings | year + city, vcov = \"twoway\") |>    residuals() |>    head() #> NOTE: 1,434 observations removed because of NA values (LHS: 616, RHS: 1,424). #> [1]  4357.90243 -8317.76671 -8897.22065  1603.32003   308.18621   -99.38339"},{"path":"https://vincentbagilet.github.io/ididvar/articles/background.html","id":"group-level-weights","dir":"Articles","previous_headings":"","what":"Group level weights","title":"Background on the weights","text":"One can compute group level weights summing weights observations within group. allows quick computation interpretation weights higher aggregation levels. group-level weights correspond within-group variance conditional treatment status. low weight groups, little amount variation dependent variable estimate effect. Considering extreme case gives clear intuition: using group level fixed effects, variation xx group, group contribute estimation parameter xx . instance, previous example, prices given city, possible estimate variations prices related variation sales city.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/background.html","id":"what-do-they-represent-really","dir":"Articles","previous_headings":"","what":"What do they represent, really?","title":"Background on the weights","text":"definition, partialled regression, weights represent squared-distance center distribution variable interest, partialling controls. following example, describing relationship x y partialled weights illustrates :  pattern clearly appears partialled regression, much less visible plotting raw relationship, hence importance analysing weights plotting partialled regression:","code":"data_partial |>   ggplot(aes(x = gdpPercap, y = lifeExp, color = idid_weight_log)) +   geom_point(size = 1.5) +   geom_rug(linewidth = 0.2) +   theme_idid() +   scale_color_idid() +   scale_x_log10() +   labs(     title = \"Relationship between life expectancy and GDP per capita\",     subtitle = \"Raw relationship\",     x = \"GDP per capita\",     y = \"Life expectancy\",     color = \"Weight, compared to 1/n, the average weight\",   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/ididvar.html","id":"overview-of-a-typical-workflow","dir":"Articles","previous_headings":"","what":"Overview of a typical workflow","title":"ididvar","text":"workflow get better understanding observations groups observations contributing identification relatively straightforward: Visualize relationship x y partialling (idid_viz_bivar function) Compute observation level weights add weight variable data set (using idid_weights) Visualize distribution weights (cumulative idid_viz_cumul, observation group level idid_viz_weights idid_viz_weights_map. identify groups variables large heterogeneity weights across groups, use idid_grouping_var). stage, one might already get sense effective sample Compute set identify contributing observations, ie observations can drop without much altering estimate (observations whose weight larger threshold computed idid_contrib_threshold). Visualize contributing observations, individual groups (using idid_viz_contrib idid_viz_contrib_map) Compute visualize effective sample size (idid_viz_drop_change idid_contrib_stats)","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/ididvar.html","id":"visualize-relationship","dir":"Articles","previous_headings":"","what":"Visualize relationship","title":"ididvar","text":"Letâ€™s assume already ran regression interest. first visualize relationship x y (Illiteracy Income) partialling understand estimating visualize driving ","code":"library(ididvar) library(dplyr) library(ggplot2) library(tigris) library(knitr)  data_ex <- state.x77 |>   as_tibble() |>   dplyr::mutate(     state = rownames(state.x77),     pop_quartiles = cut_number(Population, 4, labels = FALSE),     murder_quartiles = cut_number(Murder, 4, labels = FALSE),     income_quartiles = cut_number(Income, 4, labels = FALSE)   )   reg_ex <-lm(data = data_ex,             formula = Illiteracy ~  Income + Population + `Life Exp` + Frost) idid_viz_bivar(reg_ex, \"Income\")"},{"path":"https://vincentbagilet.github.io/ididvar/articles/ididvar.html","id":"compute-weights","dir":"Articles","previous_headings":"","what":"Compute weights","title":"ididvar","text":"can add weights data. step optional functions recompute weights.","code":"data_ex_weights <- data_ex |>    mutate(idid_weight = idid_weights(reg_ex, \"Income\"))"},{"path":"https://vincentbagilet.github.io/ididvar/articles/ididvar.html","id":"visualize-the-weights","dir":"Articles","previous_headings":"","what":"Visualize the weights","title":"ididvar","text":"can plot distribution weights using idid_viz_cumul function.  allows us analyse extend weights evenly distributed. unequal distribution hint observations contribute much identification observations may contribute much. may want explore distribution weights, using idid_viz_weights function. function makes graph visualize identifying variation weights (heatmap bar chart, depending number dimensions specified). Depending shape data, might obvious way analyse : , present example, data cross-section, one may want plot data individuals, providing var_x var_y idid_viz_weights.1  data individual-time panel, one may want plot observation using heatmap. can done , providing two dimensions var_x var_y arguments idid_viz_weights. data geographical dimension, one may want plot map weights. function idid_viz_weights_map allows easily providing shape file sf format along join variable name.","code":"idid_viz_cumul(reg_ex, \"Income\") idid_viz_weights(reg_ex, \"Income\", var_y = state, order = \"y\") states_sf <- tigris::states(     cb = TRUE, resolution = \"20m\", year = 2024, progress_bar = FALSE) |>   tigris::shift_geometry() |>    rename(state = NAME)  idid_viz_weights_map(reg_ex, \"Income\", states_sf, \"state\")"},{"path":"https://vincentbagilet.github.io/ididvar/articles/ididvar.html","id":"groups","dir":"Articles","previous_headings":"","what":"Groups","title":"ididvar","text":"additionâ€“insteadâ€“, often interesting analyse whether groups larger weights, ie contribute , others. One may priori ideas regarding variables group . cases might less clear, one can use idid_grouping_var identify variables groups created variable considered (grouping_vars argument function) group variance weights, suggesting large heterogeneity weights across groups. , larges group variance across income_quartiles, suggesting income group may larger weights others. Now dimensions along makes sense group weights identify, one can plot weights distribution across groups.  analysis can also implemented two variables time, thus building heatmaps. done method one used individual observations discussed .  explorations, one can get sense distribution weights, space groups.","code":"idid_grouping_var(   reg_ex, \"Income\",    grouping_vars = c(\"income_quartiles\", \"pop_quartiles\", \"murder_quartiles\") ) |>  knitr::kable() idid_viz_weights(reg_ex, \"Income\", income_quartiles) +   labs(     x = \"Income quartiles\",      title = \"Distribution of Identifying Variation Weights By Income\",     subtitle = \"High income states contribute more to the estimation\"   ) idid_viz_weights(reg_ex, \"Income\", income_quartiles, pop_quartiles) +   coord_fixed() +   labs(x = \"Income quartiles\", y = \"Population quartiles\")"},{"path":"https://vincentbagilet.github.io/ididvar/articles/ididvar.html","id":"contribution","dir":"Articles","previous_headings":"","what":"Contribution","title":"ididvar","text":"now may wonder observations contribute estimation . , present package identifies observations low weight can dropped without affecting point estimate standard errors given proportion. can also illustrated via idid_viz_drop_change function. plots faceted line graph describing percentage variation point estimate s.e. interest function proportion observations dropped.  function loops idid_drop_change function , given proportion observations dropped, computes variation point estimate standard errors coefficient interest dropping low weight observations. Using idid_contrib_threshold one can identify weight threshold removing observations change point estimate standard error estimate interest given proportion, se 5%: observations weight 4.28^{-4} can dropped without changing estimate interest 5%. define effective sample set observations whose weights aforementioned threshold. first use idid_contrib_stats function compute size effective sample (well initial nominal one): characterize effective sample using idid_viz_contrib idid_viz_contrib_map functions. work similar ways idid_viz_weights idid_viz_weights_map.   Online appendices associated paper complements present vignette providing example practical implementation analysis using ididvar package. â€œvisualizationsâ€ vignette provides discussion code customize graphs.","code":"idid_viz_drop_change(   reg_ex,    \"Income\",    threshold_change = 0.05, #position of the dotted line   search_end = 0.4 ) idid_contrib_threshold(reg_ex, \"Income\", threshold_change = 0.05) #> [1] 0.0004276697 idid_contrib_stats(reg_ex, \"Income\") |>    knitr::kable() #> Searching for the contribution threshold idid_viz_contrib(reg_ex, \"Income\", income_quartiles) #> Searching for the contribution threshold idid_viz_contrib_map(reg_ex, \"Income\", states_sf, \"state\") #> Searching for the contribution threshold"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"workflow-to-plot-identifying-variation-weights","dir":"Articles","previous_headings":"","what":"Workflow to plot identifying variation weights","title":"Own visualizations","text":"workflow make plot scratch straightforward: Add weight variable data set. Optionally, one can add contrib dummy. need determine contribution threshold. use idid_contrib_threshold find weight threshold removing observations change point estimate standard error estimate interest given proportion. Compute weights group level interest (state level) summing weights observations group. Plot ","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"preparation","dir":"Articles","previous_headings":"","what":"Preparation","title":"Own visualizations","text":"Letâ€™s assume already ran regression interest. also add decade variable ISO codes gapminder::country_codes dataset going use later.","code":"library(ididvar) library(tigris) library(dplyr) library(ggplot2) library(gapminder) library(fixest) library(rnaturalearth) library(rnaturalearthdata)  gapminder_sample <- gapminder |>    mutate(     l_gdpPercap = log(gdpPercap),     decade = year %/% 10 * 10   ) |>    filter(continent %in% c(\"Africa\", \"Europe\")) |>   left_join(country_codes, by = join_by(country))  reg <- feols(   data = gapminder_sample,    lifeExp ~ l_gdpPercap | country,    cluster = \"country\" )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"relationship-between-x-and-y","dir":"Articles","previous_headings":"","what":"Relationship between x and y","title":"Own visualizations","text":"anything, one may want visualize weights well relationship dependent variable independent variable interest.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"partialed-out-relationship","dir":"Articles","previous_headings":"Relationship between x and y","what":"Partialed out relationship","title":"Own visualizations","text":"mapping might less legible sample size large. instances, transparency, bin hex map bin-scatter can useful tools represent large numbers observations.","code":"data_partial <-    tibble(     lifeExp_per = idid_partial_out(reg, \"lifeExp\", \"l_gdpPercap\"),     l_gdpPercap_per = idid_partial_out(reg, \"l_gdpPercap\")   )   data_partial |>   ggplot(aes(x = l_gdpPercap_per, y = lifeExp_per)) +   geom_point(size = 2, color = idid_colors_table[[\"base\"]]) +   geom_smooth(     method = \"lm\",      formula = 'y ~ x',     color = idid_colors_table[[\"complementary\"]],     fill = idid_colors_table[[\"complementary\"]],      alpha = 0.1) +   theme_idid() +   labs(     title = \"Relationship between life expectancy and log GDP per capita\",     subtitle = \"After partialling out country fixed effects\",     x = \"Log GDP per capita (residualized)\",     y = \"Life expectancy (residualized)\"   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"ididvar-equivalent","dir":"Articles","previous_headings":"Relationship between x and y","what":"ididvar equivalent","title":"Own visualizations","text":"compute data_partial completely manually, one can following:","code":"idid_viz_bivar(reg, \"l_gdpPercap\") data_partial_manual <-    tibble(     lifeExp_per = residuals(       feols(gapminder_sample, lifeExp ~ 1 | country, cluster = \"country\")     ),     l_gdpPercap_per = residuals(       feols(gapminder_sample, l_gdpPercap ~ 1 | country, cluster = \"country\")     ),     idid_weight = (l_gdpPercap_per - mean(l_gdpPercap_per))^2   ) |>    mutate(     idid_weight = idid_weight/sum(idid_weight),     idid_weight_log = log10(idid_weight * length(idid_weight))   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"cumulative-weights","dir":"Articles","previous_headings":"","what":"Cumulative weights","title":"Own visualizations","text":"first start plotting cumulative distribution weights. can add weight variable dataset, along contrib dummy.","code":"gapminder_weights <- gapminder_sample |>    mutate(     idid_weight = idid_weights(reg, \"l_gdpPercap\"),     contrib = idid_weight > idid_contrib_threshold(reg, \"l_gdpPercap\"),     contrib_name = ifelse(contrib,                            \"In the effective sample\",                           \"Outside the effective sample\")   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"own-cumulative-graph","dir":"Articles","previous_headings":"Cumulative weights","what":"Own cumulative graph","title":"Own visualizations","text":"","code":"gapminder_weights |>    arrange(idid_weight) |>    mutate(     obs_id = row_number(),     cum_idid_weight = cumsum(idid_weight)   ) |>    ggplot(aes(x = obs_id, y = cum_idid_weight)) +    geom_line(linewidth = 1.2, color = idid_colors_table[[\"base\"]]) +   geom_area(fill = idid_colors_table[[\"base\"]], alpha = 0.2) +   theme_idid(aspect.ratio = 1) +   labs(     title = \"Cumulative distribution of weights\",     x = \"Observation index\\n(smallest to largest weight)\",     y = \"Cummulative sum of weights\"   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"ididvar-cumul-equivalent","dir":"Articles","previous_headings":"Cumulative weights","what":"ididvar cumul equivalent","title":"Own visualizations","text":"","code":"idid_viz_cumul(reg, \"l_gdpPercap\")"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"bar-plots","dir":"Articles","previous_headings":"","what":"Bar plots","title":"Own visualizations","text":"Letâ€™s assume want compare weights across countries. compute weight mean contribution level. make bar plots. readibility produce better graph, order states weight.","code":"country_weights <- gapminder_weights |>    group_by(country, iso_alpha, continent) |>    summarise(     idid_weight = sum(idid_weight, na.rm = TRUE),      contrib = sum(contrib, na.rm = TRUE),     .groups = \"drop\"   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"own-weight-graph","dir":"Articles","previous_headings":"Bar plots","what":"Own weight graph","title":"Own visualizations","text":"","code":"country_weights |>    mutate(country = forcats::fct_reorder(country, idid_weight)) |>    ggplot(aes(x = idid_weight, y = country)) +    geom_col(aes(fill = continent)) +   scale_fill_manual(values = c(\"#497C89\", \"#cf816b\")) +   # facet_wrap(~ continent, scales = \"free_y\", space = \"free_y\") +    theme_idid() +   labs(     title = \"Distribution of Identifying Variation Weights\",     x = \"Weight\",     y = NULL,     fill = NULL   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"ididvar-weight","dir":"Articles","previous_headings":"Bar plots","what":"ididvar weight","title":"Own visualizations","text":"Note , idid_viz functions, additional geoms can added top existing ones, add coloring scheme instance.","code":"idid_viz_weights(reg, \"l_gdpPercap\", var_y = country, order = \"y\") +    geom_col(aes(x = idid_weight, y = country, fill = continent)) +   scale_fill_manual(values = c(\"#497C89\", \"#cf816b\")) +   labs(y = NULL, fill = NULL)"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"own-contribution-graph","dir":"Articles","previous_headings":"Bar plots","what":"Own contribution graph","title":"Own visualizations","text":"can also plot graphs represent characterize set contributing observations.","code":"gapminder_weights |>    count(decade, contrib_name) |>    ggplot(aes(x = decade, y = n, fill = forcats::fct_rev(contrib_name))) +    geom_col() +   coord_flip() +   theme_idid() +   scale_fill_manual(values = c(idid_colors_table[[\"mid\"]], idid_colors_table[[\"base\"]])) +   labs(     title = \"Set of observations contributing to identification\",     y = \"Number of observations\",     x = NULL,     fill = NULL   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"ididvar-contribution","dir":"Articles","previous_headings":"Bar plots","what":"ididvar contribution","title":"Own visualizations","text":"","code":"idid_viz_contrib(reg, \"l_gdpPercap\", var_y = decade) +   labs(y = NULL) #> Searching for the contribution threshold #> NOTE: 2 fixed-effect singletons were removed (2 observations). #> NOTE: 4 fixed-effect singletons were removed (4 observations). #> NOTE: 3 fixed-effect singletons were removed (3 observations). #> NOTE: 9 fixed-effect singletons were removed (9 observations). #> NOTE: 13 fixed-effect singletons were removed (13 observations). #> NOTE: 11 fixed-effect singletons were removed (11 observations). #> NOTE: 11 fixed-effect singletons were removed (11 observations)."},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"heatmaps","dir":"Articles","previous_headings":"","what":"Heatmaps","title":"Own visualizations","text":"Letâ€™s assume now want compare observations across years decades. , build heatmaps thus first aggregate data level interested : can make graphs want.","code":"country_decade_weights <- gapminder_weights |>    group_by(country, decade, continent) |>    summarise(     idid_weight = sum(idid_weight, na.rm = TRUE),      contrib = sum(contrib, na.rm = TRUE),     .groups = \"drop\"   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"weights-with-no-scale","dir":"Articles","previous_headings":"Heatmaps","what":"Weights with no scale","title":"Own visualizations","text":"graph made plotting raw weights. However, one value much larger others. hides variation weight magnitude.","code":"country_decade_weights |>    mutate(country = forcats::fct_reorder(country, idid_weight, sum)) |>   ggplot(aes(x = decade, y = country, fill = idid_weight)) +    geom_tile() +   theme_idid() +   scale_fill_gradientn(     colors = c(idid_colors_table[[\"complementary\"]],                 idid_colors_table[[\"mid\"]],                 idid_colors_table[[\"base\"]])   ) +   facet_grid(continent ~ ., scales = \"free_y\", space = \"free_y\") +   theme(strip.text.y = element_text(angle = 0)) +   labs(     title = \"Distribution of Identifying Variation Weights\",     x = \"Weight\",     y = NULL   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"weights-with-scale","dir":"Articles","previous_headings":"Heatmaps","what":"Weights with scale","title":"Own visualizations","text":"therefore introduced specific scale puts various observations bins. addition, scaling weights respect average weight, scale allows make graphs comparable .","code":"country_decade_weights |>    mutate(idid_weight_log = log10(idid_weight * length(idid_weight))) |>    # mutate(country = forcats::fct_reorder(country, weight, sum)) |>   ggplot(aes(x = decade, y = country, fill = idid_weight_log)) +    geom_tile() +   theme_idid() +   scale_fill_idid() +   #what's behind scale_fill_idid()   # scale_fill_stepsn(   #   colors = c(\"#C25807\", \"#FBE2C5\", \"#300D49\"),   #   breaks = log10(c(1/100, 1/50, 1/10, 1/2, 2, 10, 50, 100)),   #   labels = c(\"0\", \"1/50x\", \"1/10x\", \"1/2x\", \"2x\", \"10x\", \"50x\", \"Inf\"),   #   limits = c(-2, 2),   #   na.value = \"gray88\"   # ) +   facet_grid(continent ~ ., scales = \"free_y\", space = \"free_y\") +   theme(strip.text.y = element_text(angle = 0)) +   labs(     title = \"Distribution of Identifying Variation Weights\",     fill = \"Weight, compared to 1/n, the average weight\",     x = NULL,     y = NULL   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"ididvar-weight-equivalent","dir":"Articles","previous_headings":"Heatmaps","what":"ididvar weight equivalent","title":"Own visualizations","text":"","code":"idid_viz_weights(reg, \"l_gdpPercap\", var_y = country, var_x = decade) +   facet_grid(continent ~ ., scales = \"free_y\", space = \"free_y\") +   theme(strip.text.y = element_text(angle = 0)) +   labs(x = NULL, y = NULL)"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"contributing-observations","dir":"Articles","previous_headings":"Heatmaps","what":"Contributing observations","title":"Own visualizations","text":"can also make heatmaps contributing observations:","code":"country_decade_weights |>    mutate(country = forcats::fct_reorder(country, contrib, sum)) |>   ggplot(aes(x = decade, y = country, fill = contrib)) +    geom_tile() +   theme_idid() +   scale_fill_gradient(     low = idid_colors_table[[\"mid\"]],     high = idid_colors_table[[\"base\"]],     na.value = \"gray88\"   ) +   facet_grid(continent ~ ., scales = \"free_y\", space = \"free_y\") +   theme(strip.text.y = element_text(angle = 0)) +   labs(     title = \"Distribution of Identifying Variation Weights\",     x = NULL,     y = NULL,     fill = \"Number of contributing observations\"   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"ididvar-contribution-heatmap","dir":"Articles","previous_headings":"Heatmaps","what":"ididvar contribution heatmap","title":"Own visualizations","text":"","code":"idid_viz_contrib(reg, \"l_gdpPercap\", decade, country, order = \"y\") +   facet_grid(continent ~ ., scales = \"free_y\", space = \"free_y\") +   labs(x = NULL, y = NULL)"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"maps","dir":"Articles","previous_headings":"","what":"Maps","title":"Own visualizations","text":"Finally, can make maps. , need shape file (sf object) merge data.","code":"world_sf <- rnaturalearth::ne_countries(scale = \"medium\", returnclass = \"sf\") |>    mutate(iso_alpha = adm0_a3)  #define a projection proj_globe <-   coord_sf(crs = \"+proj=ortho +lon_0=30 +lat_0=28\", expand = FALSE)"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"weights-map","dir":"Articles","previous_headings":"Maps","what":"Weights map","title":"Own visualizations","text":"","code":"data_sf <- world_sf |>    full_join(country_weights, by = join_by(iso_alpha)) |>    mutate(idid_weight_log = log10(idid_weight * nrow(country_weights)))   data_sf |>    ggplot() +   geom_sf(aes(fill = idid_weight_log), color = \"white\", linewidth = 0.1) +   proj_globe +   theme_idid() +   scale_fill_idid() +   labs(     title = \"Distribution of Identifying Variation Weights\",     fill = \"Weight, compared to the average weight\"   ) +   theme(     panel.grid.major = element_line(colour = \"gray90\"),     axis.text.y = ggplot2::element_blank(),     axis.text.x = ggplot2::element_blank()   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"ididvar-weights-map","dir":"Articles","previous_headings":"Maps","what":"ididvar weights map","title":"Own visualizations","text":"","code":"idid_viz_weights_map(reg, \"l_gdpPercap\", world_sf, \"iso_alpha\") +   proj_globe +   theme(panel.grid.major = element_line(colour = \"gray90\"))"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"contrib-map","dir":"Articles","previous_headings":"Maps","what":"Contrib map","title":"Own visualizations","text":"","code":"data_sf |>    ggplot() +   geom_sf(aes(fill = contrib), color = \"white\", linewidth = 0.1) +   theme_idid() +   proj_globe +   scale_fill_gradient(     low = idid_colors_table[[\"mid\"]],     high = idid_colors_table[[\"base\"]],     na.value = \"gray88\"   ) +   labs(     title = \"Distribution of contributing obs.\",     fill = \"Number of contributing observations\"   ) +   theme(     panel.grid.major = element_line(colour = \"gray90\"),     axis.text.y = ggplot2::element_blank(),     axis.text.x = ggplot2::element_blank()   )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/own-viz.html","id":"ididvar-contrib-map","dir":"Articles","previous_headings":"Maps","what":"ididvar contrib map","title":"Own visualizations","text":"","code":"idid_viz_contrib_map(reg, \"l_gdpPercap\", world_sf, \"iso_alpha\") +   proj_globe +   theme(panel.grid.major = element_line(colour = \"gray93\"))"},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"specifications","dir":"Articles","previous_headings":"","what":"Specifications","title":"Specification and variation","text":"Letâ€™s consider 5 regression models: country, continent, year, continent-year, country-year fixed effects. include additional controls simplicity. course, parameter l_gdpPercap represent quantity model. reg_country_fe, represents within country relationship lifeExp l_gdpPercap, ie comparing observations different points time, within given country. reg_year_fe, represents within year therefore across countries. goal document compare across specification sets observations contribute identification.","code":"gapminder_ext <- gapminder |>    dplyr::mutate(l_gdpPercap = log(gdpPercap)) |>    dplyr::filter(continent %in% c(\"Africa\", \"Europe\")) |>   dplyr::left_join(gapminder::country_codes, by = join_by(country))  reg_raw <- feols(data = gapminder_ext, lifeExp ~ l_gdpPercap)  reg_continent_fe <- feols(data = gapminder_ext, lifeExp ~ l_gdpPercap | continent, cluster = \"continent\")  reg_country_fe <- feols(data = gapminder_ext, lifeExp ~ l_gdpPercap | country, cluster = \"country\")  reg_continent_year_fe <- feols(data = gapminder_ext, lifeExp ~ l_gdpPercap | continent^year, cluster = c(\"continent^year\"))  reg_year_fe <- feols(data = gapminder_ext, lifeExp ~ l_gdpPercap | year, cluster = \"year\")  reg_twfe <- feols(data = gapminder_ext, lifeExp ~ l_gdpPercap | country + year, cluster = c(\"country\", \"year\"))  regs <- list(   reg_raw = reg_raw,    reg_continent_fe = reg_continent_fe,    reg_country_fe = reg_country_fe,    reg_year_fe = reg_year_fe,    reg_continent_year_fe = reg_continent_year_fe,   reg_twfe = reg_twfe )"},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"bivariate-graphs","dir":"Articles","previous_headings":"","what":"Bivariate graphs","title":"Specification and variation","text":"always applied econometrics, one first steps analysis consists exploring raw data relationship variables interest. can thus plot partialled versions relationships get sense variation partialled various sets fixed effects. graphs hopefully help understanding fixed effects fixed effects affecting relationship interest variation removing. particular case, regardless set fixed effects, relationship positive, despite quantity estimated somehow radically different.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"section","dir":"Articles","previous_headings":"","what":"Specification and variation","title":"Specification and variation","text":"Raw Continent FEs Country FEs Year FEs TWFE Code","code":"graph_bivar <- function(reg) {   idid_viz_bivar(reg, \"l_gdpPercap\") +     geom_point(aes(color = continent)) +     lims(x = c(-3, 4.2), y = c(-42, 35)) +     labs(color = NULL) +     scale_color_manual(values = c(\"#497C89\", \"#cf816b\")) }  purrr::map(regs, graph_bivar)"},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"weight-graphs","dir":"Articles","previous_headings":"","what":"Weight graphs","title":"Specification and variation","text":"explore different sets controls/FEs affect distribution weights. heatmap visualization allows analyze contribution observation separately understand individuals weights vary across specifications. country two-ways FEs instance, many observations, middle period low weight therefore contribute little identification. much less case year FEs, although later years contribute . choice fixed effects affect estimand also weight observations therefore set observations contributing identification. cases, variation weights across specifications may large cluster observations. instance, particular specification may focus weights given set observations /create clusters low-weight observations.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"section-1","dir":"Articles","previous_headings":"","what":"Specification and variation","title":"Specification and variation","text":"Raw Continent FEs Country FEs Year FEs TWFE Code","code":"graph_weights <- function(reg) {   reg |>      idid_viz_weights(\"l_gdpPercap\", var_x = year, var_y = country) +     facet_grid(continent ~ ., scales = \"free_y\", space = \"free_y\") +     theme(strip.text.y = element_text(angle = 0)) +     labs(       subtitle = paste(\"In the\", deparse(substitute(reg)), \"model\"),       caption = paste(\"Model:\", deparse(reg$call[[2]])),       x = NULL,        y = NULL     ) }  purrr::map(regs, graph_weights)"},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"contribution-graphs","dir":"Articles","previous_headings":"","what":"Contribution graphs","title":"Specification and variation","text":"Contribution graphs confirm previous analyses. represent observations one drop without changing point estimate standard error given proportion, se 5%. country FEs instance, many observations contribute estimation observations contribute disproportionately located beginning end period. might affects external validity analysis. Beyond external validity concerns, contribution graphs underline effective sample size varies lot across specifications. discussed research paper, specification choices may affect statistical power exaggeration.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"section-2","dir":"Articles","previous_headings":"","what":"Specification and variation","title":"Specification and variation","text":"Raw Continent FEs Country FEs Year FEs TWFE Code","code":"#> Searching for the contribution threshold #> Searching for the contribution threshold #> Searching for the contribution threshold #> Searching for the contribution threshold graph_contrib <- function(reg) {   reg |>      idid_viz_contrib(\"l_gdpPercap\", var_x = year, var_y = country) +     facet_grid(continent ~ ., scales = \"free_y\", space = \"free_y\") +     theme(strip.text.y = element_text(angle = 0)) +     labs(       caption = paste(\"Model:\", deparse(reg$call[[2]])),       x = NULL,        y = NULL     ) }  purrr::map(regs, graph_contrib)"},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"contribution-sets","dir":"Articles","previous_headings":"","what":"Contribution sets","title":"Specification and variation","text":"previous visual analysis confirmed computing effective sample size; varies strongly specification.","code":"purrr::map(regs, idid_contrib_stats, var_interest = \"l_gdpPercap\") |>    list_rbind() |>    mutate(reg = names(regs), .before = 1) |>    arrange(n_effective) |>    knitr::kable()"},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"histograms","dir":"Articles","previous_headings":"","what":"Histograms","title":"Specification and variation","text":"substantial share variation across specifications seem come time. can explore focusing variable building histograms instead heatmaps. noted , country FEs, contributing observations located early late periods. addition, notable pattern year FEs Africa: later years contribute earlier years.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"section-3","dir":"Articles","previous_headings":"","what":"Specification and variation","title":"Specification and variation","text":"Raw Continent FEs Country FEs Year FEs TWFE Code","code":"#> Searching for the contribution threshold #> Searching for the contribution threshold #> Searching for the contribution threshold #> Searching for the contribution threshold hist_contrib <- function(reg) {   reg |>      idid_viz_contrib(\"l_gdpPercap\", var_x = year) +     facet_grid(continent ~ ., scales = \"free_y\", space = \"free_y\") +     theme(strip.text.y = element_text(angle = 0)) +     labs(       caption = paste(\"Model:\", deparse(reg$call[[2]])),       x = NULL,        y = NULL     ) }  purrr::map(regs, hist_contrib)"},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"maps","dir":"Articles","previous_headings":"","what":"Maps","title":"Specification and variation","text":"Since also variation across specifications terms much country contributes identification, can use idid_viz_map explore . country FE specification, set countries contribute identification limited representative overall sample.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"section-4","dir":"Articles","previous_headings":"","what":"Specification and variation","title":"Specification and variation","text":"Raw Continent FEs Country FEs Year FEs TWFE Code","code":"#> Searching for the contribution threshold #> Searching for the contribution threshold #> Searching for the contribution threshold #> Searching for the contribution threshold world_sf <- rnaturalearth::ne_countries(scale = \"medium\", returnclass = \"sf\") |>    mutate(iso_alpha = adm0_a3)  map_contrib <- function(reg) {   idid_viz_contrib_map(reg, \"l_gdpPercap\", world_sf, \"iso_alpha\") +     coord_sf(crs = \"+proj=ortho +lon_0=30 +lat_0=28\", expand = FALSE) +     theme(panel.grid.major = element_line(colour = \"gray90\"))  }  purrr::map(regs, map_contrib)"},{"path":"https://vincentbagilet.github.io/ididvar/articles/specification.html","id":"conclusion","dir":"Articles","previous_headings":"","what":"Conclusion","title":"Specification and variation","text":"Overall, analysis showed issues representativity effective sample size country FEs specification. invites consider results specification carefully.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Vincent Bagilet. Author, maintainer.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Bagilet V (2025). ididvar: Identifying Identifying Variation Regression. R package version 0.0.1, https://vincentbagilet.github.io/ididvar/.","code":"@Manual{,   title = {ididvar: Identifying the Identifying Variation in a Regression},   author = {Vincent Bagilet},   year = {2025},   note = {R package version 0.0.1},   url = {https://vincentbagilet.github.io/ididvar/}, }"},{"path":"https://vincentbagilet.github.io/ididvar/index.html","id":"ididvar-","dir":"","previous_headings":"","what":"Identifying the Identifying Variation in a Regression","title":"Identifying the Identifying Variation in a Regression","text":"package provides tools easily identify identifying variation regression, specifically applied economics analyses. package built part research project. , associated paper provides detailed scientific description content underpinnings. package active development functions may work perfectly, yet.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Identifying the Identifying Variation in a Regression","text":"can install development version ididvar GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"vincentbagilet/ididvar\")"},{"path":"https://vincentbagilet.github.io/ididvar/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Identifying the Identifying Variation in a Regression","text":"functions package take input output regression name variable interest. ididvar supports breadth estimation packages (lm, plm, fixest instance). First, package provides straightforward function compute identifying variation weights. package also allows effortless exploration weights visualizations.  particular (somehow silly) regression, identifying variation comes cities: Houston, Dallas, Austin San Antonio.  also provide functions identify observations actually contribute identification (sense dropping observations significantly affect estimate obtained).  package provides large set functions. Get started vignette introduces concise manner, also describing typical workflow analysis. Online appendices associated paper complements vignette providing example practical implementation analysis using ididvar package.","code":"library(ididvar) library(ggplot2)  reg_ex_fixest <- ggplot2::txhousing |>   dplyr::mutate(l_sales = log(sales)) |>    fixest::feols(fml = l_sales ~ median + listings | year + city, vcov = \"twoway\")  idid_weights(reg_ex_fixest, \"median\") |>   head() #> [1] 1.417497e-05 5.163932e-05 5.908480e-05 1.918702e-06 7.089139e-08 #> [6] 7.372159e-09 idid_viz_weights(reg_ex_fixest, \"median\", year, city, order = \"y\") +   ggplot2::labs(x = NULL, y = NULL) idid_viz_cumul(reg_ex_fixest, \"median\") idid_viz_contrib(reg_ex_fixest, \"median\", var_y = city, order = \"y\") +   ggplot2::labs(y = NULL)"},{"path":"https://vincentbagilet.github.io/ididvar/index.html","id":"feedback-and-contributions","dir":"","previous_headings":"","what":"Feedback and contributions","title":"Identifying the Identifying Variation in a Regression","text":"Feedback contributions welcome. find bug package work specific case, hesitate create new issue Github send email vincent.bagilet@ens-lyon.fr.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatLogWeight.html","id":null,"dir":"Reference","previous_headings":"","what":"Automatic aggregation and log-transform for tiles â€” StatLogWeight","title":"Automatic aggregation and log-transform for tiles â€” StatLogWeight","text":"ggplot2 Stat behaves like stat_summary_2d automatically: Sums z-values per (x, y) Applies transformation log10(sum(z) * n_x * n_y)","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatLogWeight.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Automatic aggregation and log-transform for tiles â€” StatLogWeight","text":"","code":"StatLogWeight"},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatLogWeight.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Automatic aggregation and log-transform for tiles â€” StatLogWeight","text":"object class StatLogWeight (inherits Stat, ggproto, gg) length 4.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatLogWeight.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Automatic aggregation and log-transform for tiles â€” StatLogWeight","text":"summarise weights var_xvary_y groups (summing values), take ratio weight group average weight across groups (1/(n_xn_y)) takes log10","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatSumSf.html","id":null,"dir":"Reference","previous_headings":"","what":"Automatic mean aggregation for sf â€” StatSumSf","title":"Automatic mean aggregation for sf â€” StatSumSf","text":"ggplot2 Stat sums values provided z geometry","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatSumSf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Automatic mean aggregation for sf â€” StatSumSf","text":"","code":"StatSumSf"},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatSumSf.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Automatic mean aggregation for sf â€” StatSumSf","text":"object class StatSumSf (inherits StatSf, Stat, ggproto, gg) length 4.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatSumTile.html","id":null,"dir":"Reference","previous_headings":"","what":"Automatic mean aggregation for tiles â€” StatSumTile","title":"Automatic mean aggregation for tiles â€” StatSumTile","text":"ggplot2 Stat sums values provided z tile","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatSumTile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Automatic mean aggregation for tiles â€” StatSumTile","text":"","code":"StatSumTile"},{"path":"https://vincentbagilet.github.io/ididvar/reference/StatSumTile.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Automatic mean aggregation for tiles â€” StatSumTile","text":"object class StatSumTile (inherits Stat, ggproto, gg) length 4.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_colors_table.html","id":null,"dir":"Reference","previous_headings":"","what":"A table with the main colors used in base plots in this package â€” idid_colors_table","title":"A table with the main colors used in base plots in this package â€” idid_colors_table","text":"table containing name color combination, base color, background color, lighter darker one","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_colors_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A table with the main colors used in base plots in this package â€” idid_colors_table","text":"","code":"idid_colors_table"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_colors_table.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"A table with the main colors used in base plots in this package â€” idid_colors_table","text":"data frame 644 rows 3 variables: pal palette name base base color one color graphs color large values multiple color graphs mid Middle color multiple color graphs complementary complementary color one color graphs color small values multiple color graphs text Text color","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute quick descriptive statistics on the effective sample â€” idid_contrib_stats","title":"Compute quick descriptive statistics on the effective sample â€” idid_contrib_stats","text":"Reports total, nominal effective sample size, well proportion observations nominal sample part effective one.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute quick descriptive statistics on the effective sample â€” idid_contrib_stats","text":"","code":"idid_contrib_stats(   reg,   var_interest,   contrib_threshold,   threshold_change = 0.05,   ... )"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute quick descriptive statistics on the effective sample â€” idid_contrib_stats","text":"reg regression object. var_interest string. name main variable interest. contrib_threshold numeric (optional). Weight observations deemed non-contributing. provided, determined running ididvar::idid_contrib_threshold threshold_change double (0 1). change threshold estimate s.e. dropping observations. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute quick descriptive statistics on the effective sample â€” idid_contrib_stats","text":"dataframe 4 columns: n_total: total sample size, dropping observations missing values n_nominal: nominal sample size, ie number observations regression n_effective: effective sample size, removing non contributing observations prop_effective: ratio effective nominal sample sizes","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_stats.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute quick descriptive statistics on the effective sample â€” idid_contrib_stats","text":"","code":"reg_ex <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median + listings + city + as.factor(date))  idid_contrib_stats(reg_ex, \"median\") #> Searching for the contribution threshold #>   n_initial n_nominal n_effective prop_effective #> 1      8602      7168        3943      0.5500837"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_threshold.html","id":null,"dir":"Reference","previous_headings":"","what":"Find a weight threshold below which observations ","title":"Find a weight threshold below which observations ","text":"Find weight threshold removing observations change point estimate standard error estimate interest given proportion.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_threshold.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find a weight threshold below which observations ","text":"","code":"idid_contrib_threshold(   reg,   var_interest,   threshold_change = 0.05,   search_step = 0.05,   ... )"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_threshold.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find a weight threshold below which observations ","text":"reg regression object. var_interest string. name main variable interest. threshold_change double (0 1). change threshold estimate s.e. dropping observations. search_step double (0 1). additional proportion observations drop iteration loop. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_threshold.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find a weight threshold below which observations ","text":"numeric. largest weight one can drop observations without altering estimate proportion threshold_change.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_threshold.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Find a weight threshold below which observations ","text":"function applies ididvar::idid_drop_change series proportions observations removed, increasing proportion search_step variation estimate s.e. compared full sample less threshold_change.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_contrib_threshold.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Find a weight threshold below which observations ","text":"","code":"reg_ex <- ggplot2::economics |>   lm(formula = unemploy ~ pce + uempmed + psavert + pop)  idid_contrib_threshold(reg_ex, \"pce\") #> [1] 0.0005871943"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_change.html","id":null,"dir":"Reference","previous_headings":"","what":"Variation in estimate when dropping low weight observations â€” idid_drop_change","title":"Variation in estimate when dropping low weight observations â€” idid_drop_change","text":"Computes variation point estimate standard errors coefficient interest dropping low weight observations.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_change.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Variation in estimate when dropping low weight observations â€” idid_drop_change","text":"","code":"idid_drop_change(reg, var_interest, prop_drop, ...)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_change.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Variation in estimate when dropping low weight observations â€” idid_drop_change","text":"reg regression object. var_interest string. name main variable interest. prop_drop Proportion observations drop ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_change.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Variation in estimate when dropping low weight observations â€” idid_drop_change","text":"dataframe one row 3 columns: prop_drop: proportion data dropped prop_change_est: relative change full sample droped estimates prop_change_se: relative change full sample droped s.e.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_change.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Variation in estimate when dropping low weight observations â€” idid_drop_change","text":"","code":"reg_ex <- ggplot2::economics |>   lm(formula = unemploy ~ pce + uempmed + psavert + pop)  idid_drop_change(reg_ex, \"pce\", prop_drop = 0.1) #>   prop_drop prop_change_est prop_change_se #> 1       0.1     0.002222509    -0.00399835"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_reg.html","id":null,"dir":"Reference","previous_headings":"","what":"Run the regression with low weight observations dropped â€” idid_drop_reg","title":"Run the regression with low weight observations dropped â€” idid_drop_reg","text":"Re-run regression dropping low weight observations.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_reg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run the regression with low weight observations dropped â€” idid_drop_reg","text":"","code":"idid_drop_reg(reg, var_interest, prop_drop, ...)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_reg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run the regression with low weight observations dropped â€” idid_drop_reg","text":"reg regression object. var_interest string. name main variable interest. prop_drop Proportion observations drop ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_reg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run the regression with low weight observations dropped â€” idid_drop_reg","text":"regression object","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_reg.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run the regression with low weight observations dropped â€” idid_drop_reg","text":"function recomputes weights","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_drop_reg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run the regression with low weight observations dropped â€” idid_drop_reg","text":"","code":"reg_ex <- ggplot2::economics |>   lm(formula = unemploy ~ pce + uempmed + psavert + pop)  idid_drop_reg(reg_ex, \"pce\", prop_drop = 0.1) #>  #> Call: #> lm(formula = unemploy ~ pce + uempmed + psavert + pop, data = df_sliced,  #>     use_calling_env = FALSE) #>  #> Coefficients: #> (Intercept)          pce      uempmed      psavert          pop   #>  -3.424e+04   -1.591e+00    5.742e+02    2.002e+02    1.673e-01   #>"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_grouping_var.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the between-group variances in weights â€” idid_grouping_var","title":"Compute the between-group variances in weights â€” idid_grouping_var","text":"Identify variables along groups may contribute heterogeneously identification.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_grouping_var.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the between-group variances in weights â€” idid_grouping_var","text":"","code":"idid_grouping_var(reg, var_interest, grouping_vars, ...)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_grouping_var.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the between-group variances in weights â€” idid_grouping_var","text":"reg regression object. var_interest string. name main variable interest. grouping_vars string vector variable names \"everything\". set variables group weights . \"everything\" passed, group variables data set successively. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_grouping_var.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the between-group variances in weights â€” idid_grouping_var","text":"dataframe 2 columns: grouping_var names grouping var between_var -group variation weights","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_grouping_var.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute the between-group variances in weights â€” idid_grouping_var","text":"Identify variables grouping variable yields heterogeneous -groups differences weights (.e. largest -groups variance).","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_grouping_var.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the between-group variances in weights â€” idid_grouping_var","text":"","code":"reg_ex <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median + listings + city + as.factor(date))  idid_grouping_var(reg_ex, \"median\", grouping_vars = c(\"city\", \"year\", \"month\")) #>   grouping_var  between_var #> 2         year 0.0014294311 #> 1         city 0.0003418194 #> 3        month 0.0001321872  #We can now then explore the weights along the dimension with the largest #variance: year idid_viz_weights(reg_ex, \"median\", year)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_partial_out.html","id":null,"dir":"Reference","previous_headings":"","what":"Partial out controls â€” idid_partial_out","title":"Partial out controls â€” idid_partial_out","text":"Compute partialled version variable based regression model provided.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_partial_out.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Partial out controls â€” idid_partial_out","text":"","code":"idid_partial_out(reg, var_to_partial, var_interest = var_to_partial, ...)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_partial_out.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Partial out controls â€” idid_partial_out","text":"reg regression object. var_to_partial string. name variable compute partialled version. var_interest string. name main variable interest. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_partial_out.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Partial out controls â€” idid_partial_out","text":"vector partialled version var_to_partial.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_partial_out.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Partial out controls â€” idid_partial_out","text":"partialling procedure implemented using estimation method one used reg. var_interest specified (different var_to_partial), var_interest partialled . espetially interesting one wants partial controls variable interest.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_partial_out.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Partial out controls â€” idid_partial_out","text":"","code":"# example with a lm regression reg_ex_lm <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median + listings + city + as.factor(date))  idid_partial_out(reg_ex_lm, \"median\") |>  head() #>         1         2         3         4         5         6  #> 10160.214 -3303.202 -4227.209  3889.547  2092.269 -3574.464   idid_partial_out(reg_ex_lm, \"log(sales)\", \"median\") |>  head() #>            1            2            3            4            5            6  #> -0.050652563 -0.045605122  0.005417663 -0.160510848 -0.033033531  0.002041210   # example with a fixest regression reg_ex_fixest <- ggplot2::txhousing  |>   fixest::feols(fml = log(sales) ~ median + listings |  as.factor(date) + city) #> NOTE: 1,434 observations removed because of NA values (LHS: 568, RHS: 1,434).  idid_partial_out(reg_ex_fixest, \"median\") |>   head() #> NOTE: 1,434 observations removed because of NA values (LHS: 616, RHS: 1,424). #> [1] 10160.214 -3303.202 -4227.209  3889.547  2092.269 -3574.464  idid_partial_out(reg_ex_fixest, \"log(sales)\", \"median\") |>   head() #> NOTE: 1,426 observations removed because of NA values (LHS: 568, RHS: 1,424). #> [1] -0.050652563 -0.045605122  0.005417663 -0.160510848 -0.033033530 #> [6]  0.002041210"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_bivar.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualization of the relationship between x and y, after partialling out â€” idid_viz_bivar","title":"Visualization of the relationship between x and y, after partialling out â€” idid_viz_bivar","text":"Makes bivariate graph visualize data relationship outcome variable interest, partialLed controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_bivar.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualization of the relationship between x and y, after partialling out â€” idid_viz_bivar","text":"","code":"idid_viz_bivar(reg, var_interest)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_bivar.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualization of the relationship between x and y, after partialling out â€” idid_viz_bivar","text":"reg regression object. var_interest string. name main variable interest.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_bivar.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualization of the relationship between x and y, after partialling out â€” idid_viz_bivar","text":"ggplot2 scatter plot regression line relationship outcome variable interest, partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_bivar.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualization of the relationship between x and y, after partialling out â€” idid_viz_bivar","text":"","code":"reg_few_ctrl <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median)  idid_viz_bivar(reg_few_ctrl, \"median\") #> Warning: Removed 617 rows containing non-finite outside the scale range #> (`stat_smooth()`). #> Warning: Removed 617 rows containing missing values or values outside the scale range #> (`geom_point()`).   reg_more_ctrl <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median + listings + city + as.factor(date))  idid_viz_bivar(reg_more_ctrl, \"median\") #> Warning: Removed 1434 rows containing non-finite outside the scale range #> (`stat_smooth()`). #> Warning: Removed 1434 rows containing missing values or values outside the scale range #> (`geom_point()`)."},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualization of observations contributing (or not) to estimation â€” idid_viz_contrib","title":"Visualization of observations contributing (or not) to estimation â€” idid_viz_contrib","text":"Make graph visualize observations can dropped without changing point estimate standard error estimate interest given proportion (threshold_change). Makes heatmap bar chart, depending number dimensions specified.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualization of observations contributing (or not) to estimation â€” idid_viz_contrib","text":"","code":"idid_viz_contrib(   reg,   var_interest,   var_x,   var_y,   contrib_threshold,   threshold_change = 0.05,   order = \"\",   colors = c(\"#C25807\", \"#FBE2C5\", \"#300D49\"),   keep_labels = TRUE,   ... )"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualization of observations contributing (or not) to estimation â€” idid_viz_contrib","text":"reg regression object. var_interest string. name main variable interest. var_x variable data set used reg plot x-axis. var_y variable data set used reg plot y-axis (optional). specified, produces bar chart. contrib_threshold numeric (optional). Weight observations deemed non-contributing. provided, determined running ididvar::idid_contrib_threshold threshold_change double (0 1). change threshold estimate s.e. dropping observations. order string (either \"x\", \"y\" \"xy\") describing whether graph order, along x y axis . anything else specified, specific ordering applied. colors string vector colors palette. recommend pass vector 3 distinct colors, lighter color middle, constituting diverging scale. allows clear distinction contributing non contributing observations. keep_labels boolean (optional). FALSE, removes y labels ticks. option useful panels large number individuals. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualization of observations contributing (or not) to estimation â€” idid_viz_contrib","text":"ggplot2 graph observations contributing estimation. var_y specified, returns heatmap whose color describes whether given observation contribute (.e. can dropped, along lower weight observations, without substantially altering estimate) var_y specified, returns bar chart representing number observations can dropped group.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualization of observations contributing (or not) to estimation â€” idid_viz_contrib","text":"","code":"reg_ex <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median + listings + city + as.factor(date))  idid_viz_contrib(reg_ex, \"median\", year, city, order = \"y\") +   ggplot2::labs(x = NULL, y = NULL) #> Searching for the contribution threshold #> Warning: Removed 1434 rows containing non-finite outside the scale range #> (`stat_sum_tile()`).   idid_viz_contrib(reg_ex, \"median\", var_y = city, order = \"y\") +   ggplot2::labs(x = NULL) #> Searching for the contribution threshold"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a map of the effective sample â€” idid_viz_contrib_map","title":"Plot a map of the effective sample â€” idid_viz_contrib_map","text":"Makes map visualize observations can dropped without changing point estimate standard error estimate interest given proportion (threshold_change).","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a map of the effective sample â€” idid_viz_contrib_map","text":"","code":"idid_viz_contrib_map(   reg,   var_interest,   shape_file,   join_by,   contrib_threshold,   threshold_change = 0.05,   colors = c(\"#C25807\", \"#FBE2C5\", \"#300D49\"),   ... )"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a map of the effective sample â€” idid_viz_contrib_map","text":"reg regression object. var_interest string. name main variable interest. shape_file sf object. shape file map weights . join_by character string. name variable original data shape_file along matching performed. contrib_threshold numeric (optional). Weight observations deemed non-contributing. provided, determined running ididvar::idid_contrib_threshold threshold_change double (0 1). change threshold estimate s.e. dropping observations. colors string vector colors palette. recommend pass vector 3 distinct colors, lighter color middle, constituting diverging scale. allows clear distinction contributing non contributing observations. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot a map of the effective sample â€” idid_viz_contrib_map","text":"ggplot object.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_contrib_map.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a map of the effective sample â€” idid_viz_contrib_map","text":"","code":"reg <- state.x77 |>   dplyr::as_tibble() |>   dplyr::mutate(NAME = rownames(state.x77)) |>   lm(formula = Illiteracy ~  Income + Population + `Life Exp` + Frost)  states_sf <- tigris::states(     cb = TRUE, resolution = \"20m\", year = 2024, progress_bar = FALSE) |>   tigris::shift_geometry()  idid_viz_contrib_map(reg, \"Income\", states_sf, \"NAME\") #> Searching for the contribution threshold"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_cumul.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualization of the cumulative distribution of weights â€” idid_viz_cumul","title":"Visualization of the cumulative distribution of weights â€” idid_viz_cumul","text":"Visualization cumulative distribution weights","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_cumul.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualization of the cumulative distribution of weights â€” idid_viz_cumul","text":"","code":"idid_viz_cumul(reg, var_interest, prop_weights = 0.2, color = \"#300D49\", ...)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_cumul.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualization of the cumulative distribution of weights â€” idid_viz_cumul","text":"reg regression object. var_interest string. name main variable interest. prop_weights numeric (0 1). proportion weights consider contributing identification. Used build subtitle. color string. Color graph. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_cumul.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualization of the cumulative distribution of weights â€” idid_viz_cumul","text":"ggplot2 graph cumulative distribution weights.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_cumul.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualization of the cumulative distribution of weights â€” idid_viz_cumul","text":"","code":"reg_ex <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median + listings + city + as.factor(date))  idid_viz_cumul(reg_ex, \"median\")"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_drop_change.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualize changes in point estimate and s.e. when dropping observations â€” idid_viz_drop_change","title":"Visualize changes in point estimate and s.e. when dropping observations â€” idid_viz_drop_change","text":"Make faceted line graph describing percentage variation point estimate s.e. interest function proportion observations dropped.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_drop_change.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualize changes in point estimate and s.e. when dropping observations â€” idid_viz_drop_change","text":"","code":"idid_viz_drop_change(   reg,   var_interest,   threshold_change = 0.05,   search_step = 0.05,   search_start = search_step,   search_end = 1 - search_step,   color = \"#300D49\",   ... )"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_drop_change.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualize changes in point estimate and s.e. when dropping observations â€” idid_viz_drop_change","text":"reg regression object. var_interest string. name main variable interest. threshold_change double (0 1). change threshold estimate s.e. dropping observations. search_step double (0 1). additional proportion observations drop iteration loop. search_start numeric (0 1). Proportion observation drop first step loop idid_contrib_threshold. search_end numeric (0 1). Proportion observation drop last step loop idid_contrib_threshold. color string. Color graph. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_drop_change.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualize changes in point estimate and s.e. when dropping observations â€” idid_viz_drop_change","text":"ggplot2 object. name facet variable measure.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_drop_change.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualize changes in point estimate and s.e. when dropping observations â€” idid_viz_drop_change","text":"","code":"reg_ex <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median + listings + city + as.factor(date))  idid_viz_drop_change(reg_ex, \"median\", search_end = 0.6)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualization of Identifying Variation Weights â€” idid_viz_weights","title":"Visualization of Identifying Variation Weights â€” idid_viz_weights","text":"Makes graph visualize identifying variation weights (heatmap bar chart, depending number dimensions specified)","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualization of Identifying Variation Weights â€” idid_viz_weights","text":"","code":"idid_viz_weights(   reg,   var_interest,   var_x,   var_y,   order = \"\",   colors = c(\"#C25807\", \"#FBE2C5\", \"#300D49\"),   keep_labels = TRUE,   ... )"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualization of Identifying Variation Weights â€” idid_viz_weights","text":"reg regression object. var_interest string. name main variable interest. var_x variable data set used reg plot x-axis. var_y variable data set used reg plot y-axis (optional). specified, produces bar chart. order string (either \"x\", \"y\" \"xy\") describing whether graph order, along x y axis . anything else specified, specific ordering applied. colors string vector colors palette. recommend pass vector 3 distinct colors, lighter color middle, constituting diverging scale. allows clear distinction contributing non contributing observations. keep_labels boolean (optional). FALSE, removes y labels ticks. option useful panels large number individuals. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualization of Identifying Variation Weights â€” idid_viz_weights","text":"ggplot2 graph identifying variation weights. var_y specified, returns heatmap whose color represents categorized version identifying variation weights (categorization prevents vizualisation driven extremely large weights). var_y specified, returns bar chart representing weights group.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Visualization of Identifying Variation Weights â€” idid_viz_weights","text":"observation group (.e. one category var_x var_x x var_y), weight group computed summing individual weights group, removing missing values.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualization of Identifying Variation Weights â€” idid_viz_weights","text":"","code":"# example one dimension reg_ex_one_dim <- ggplot2::economics |>   transform(year = substr(date, 1, 4) |> as.numeric()) |>   lm(formula = unemploy ~ pce + uempmed + psavert + pop + year)  idid_viz_weights(reg_ex_one_dim, \"pce\", var_x = year) +   ggplot2::labs(x = NULL)   # example with two dimensions reg_ex_two_dim <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median + listings + as.factor(date) + city)  idid_viz_weights(reg_ex_two_dim, \"median\", year, city, order = \"y\") +   ggplot2::labs(x = NULL, y = NULL) #> Warning: Removed 1434 rows containing non-finite outside the scale range #> (`stat_log_weight()`)."},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a map of identifying variation weights â€” idid_viz_weights_map","title":"Plot a map of identifying variation weights â€” idid_viz_weights_map","text":"Displaying weights fill color scale region, nothing. overlapping polygons, error occur, ... supplied (see ) passed onto subsequent geom_sf(), otherwise warning raised.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a map of identifying variation weights â€” idid_viz_weights_map","text":"","code":"idid_viz_weights_map(   reg,   var_interest,   shape_file,   join_by,   facet,   colors = c(\"#C25807\", \"#FBE2C5\", \"#300D49\"),   ... )"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a map of identifying variation weights â€” idid_viz_weights_map","text":"reg regression object. var_interest string. name main variable interest. shape_file sf object. shape file map weights . join_by character string. name variable original data shape_file along matching performed. facet character string. name variable original data facet data graphs . colors string vector colors palette. recommend pass vector 3 distinct colors, lighter color middle, constituting diverging scale. allows clear distinction contributing non contributing observations. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot a map of identifying variation weights â€” idid_viz_weights_map","text":"ggplot object.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_viz_weights_map.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a map of identifying variation weights â€” idid_viz_weights_map","text":"","code":"reg <- state.x77 |>   dplyr::as_tibble() |>   dplyr::mutate(NAME = rownames(state.x77)) |>   lm(formula = Illiteracy ~  Income + Population + `Life Exp` + Frost)  states_sf <- tigris::states(     cb = TRUE, resolution = \"20m\", year = 2024, progress_bar = FALSE) |>   tigris::shift_geometry()  idid_viz_weights_map(reg, \"Income\", states_sf, \"NAME\")"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_weights.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Identifying Variation Weights â€” idid_weights","title":"Compute Identifying Variation Weights â€” idid_weights","text":"Compute regression weights describing amount variation used identification.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_weights.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Identifying Variation Weights â€” idid_weights","text":"","code":"idid_weights(reg, var_interest, ...)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_weights.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Identifying Variation Weights â€” idid_weights","text":"reg regression object. var_interest string. name main variable interest. ... Additional elements pass regression function partialling controls.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_weights.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Identifying Variation Weights â€” idid_weights","text":"numeric vector representing identifying variation weights.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_weights.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Identifying Variation Weights â€” idid_weights","text":"weights correspond normalized leverage observation variable interest partialling controls. computed re-running regression provided replacing independent variable variable interest (removing set regressors). nature independent variable variable interest different, one may want change estimation. instance, independent variable discrete estimated via glm argument family = \"binomial\" dependent variable continuous, one may want provide argument family = \"gaussian\" idid_weights.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/idid_weights.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Identifying Variation Weights â€” idid_weights","text":"","code":"reg_ex_lm <- ggplot2::txhousing |>   lm(formula = log(sales) ~ median + listings + city + as.factor(date))  idid_weights(reg_ex_lm, \"median\") |>  head() #>            1            2            3            4            5            6  #> 8.693583e-05 9.188898e-06 1.504876e-05 1.274063e-05 3.686616e-06 1.076007e-05"},{"path":"https://vincentbagilet.github.io/ididvar/reference/ididvar-package.html","id":null,"dir":"Reference","previous_headings":"","what":"ididvar: Identifying the Identifying Variation in a Regression â€” ididvar-package","title":"ididvar: Identifying the Identifying Variation in a Regression â€” ididvar-package","text":"Provides set tools identify identifying variation regression comes .","code":""},{"path":[]},{"path":"https://vincentbagilet.github.io/ididvar/reference/ididvar-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"ididvar: Identifying the Identifying Variation in a Regression â€” ididvar-package","text":"Maintainer: Vincent Bagilet vincent.bagilet@ens-lyon.fr","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/order_axes.html","id":null,"dir":"Reference","previous_headings":"","what":"Ordering axes â€” order_axes","title":"Ordering axes â€” order_axes","text":"Orders axes depending order desired Used idid_viz_weights idid_viz_contrib.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/order_axes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ordering axes â€” order_axes","text":"","code":"order_axes(df, name_var_x, name_var_y, order, by = \"idid_weight\")"},{"path":"https://vincentbagilet.github.io/ididvar/reference/order_axes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ordering axes â€” order_axes","text":"df dataframe order order string (either \"x\", \"y\" \"xy\") describing whether graph order, along x y axis . anything else specified, specific ordering applied.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/order_axes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ordering axes â€” order_axes","text":"df ordered along order axis according value ","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/scale_fill_idid.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a custom color scale for ididvar visualizations â€” scale_fill_idid","title":"Create a custom color scale for ididvar visualizations â€” scale_fill_idid","text":"function makes custom color scale ensures breaks terms weight size (relative average) consistent across users. scale fixed limits even small large weights, scale remains color appear graph (see second example graph). Note labels scale specific ididvar application built weights whose sum equals 1 mind (thus whose average equal 1/n_obs).","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/scale_fill_idid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a custom color scale for ididvar visualizations â€” scale_fill_idid","text":"","code":"scale_fill_idid(colors = c(\"#C25807\", \"#FBE2C5\", \"#300D49\"), ...)  scale_color_idid(colors = c(\"#C25807\", \"#FBE2C5\", \"#300D49\"), ...)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/scale_fill_idid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a custom color scale for ididvar visualizations â€” scale_fill_idid","text":"colors string vector colors palette. recommend pass vector 3 distinct colors, lighter color middle, constituting diverging scale. allows clear distinction contributing non contributing observations. ... Additional arguments passed ggplot2::scale_fill_stepsn  ggplot2::scale_color_stepsn function","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/scale_fill_idid.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a custom color scale for ididvar visualizations â€” scale_fill_idid","text":"","code":"reg_ex_fixest <- ggplot2::txhousing |>   fixest::feols(fml = log(sales) ~ median + listings |  as.factor(date) + city) #> NOTE: 1,434 observations removed because of NA values (LHS: 568, RHS: 1,434).  idid_viz_weights(reg_ex_fixest, \"median\", year, city) +   ggplot2::labs(x = NULL, y = NULL) +   scale_fill_idid(colors = c(\"#19304d\", \"#fae7d3\", \"#84141e\")) #> NOTE: 1,434 observations removed because of NA values (LHS: 616, RHS: 1,424). #> Scale for fill is already present. #> Adding another scale for fill, which will replace the existing scale. #> Warning: Removed 1434 rows containing non-finite outside the scale range #> (`stat_log_weight()`).   ggplot2::mpg |>   ggplot2::ggplot(ggplot2::aes(x = displ, hwy, color = cyl)) +   ggplot2::geom_point() +   ggplot2::labs(     title = \"The scale has fixed limits\",     subtitle = \"This scale is built for values between 0 and 1\",     color = \"Value, as compared to 1/n_obs\"   ) +   theme_idid() +   scale_color_idid()"},{"path":"https://vincentbagilet.github.io/ididvar/reference/theme_idid.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a custom theme for ididvar visualizations â€” theme_idid","title":"Create a custom theme for ididvar visualizations â€” theme_idid","text":"function return custom ggplot2 theme.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/theme_idid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a custom theme for ididvar visualizations â€” theme_idid","text":"","code":"theme_idid(...)"},{"path":"https://vincentbagilet.github.io/ididvar/reference/theme_idid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a custom theme for ididvar visualizations â€” theme_idid","text":"... Additional arguments passed theme function","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/theme_idid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a custom theme for ididvar visualizations â€” theme_idid","text":"specified theme object.","code":""},{"path":"https://vincentbagilet.github.io/ididvar/reference/theme_idid.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a custom theme for ididvar visualizations â€” theme_idid","text":"","code":"ggplot2::mpg |>   ggplot2::ggplot(ggplot2::aes(x = displ, hwy, color = cyl)) +   ggplot2::geom_point() +   ggplot2::labs(     title = \"A wonderful title\",     subtitle = \"Something to add\"   ) +   theme_idid()"}]
